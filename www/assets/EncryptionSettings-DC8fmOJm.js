import{j as te,f as le,g as u,y as oe,c as S,m as t,D as v,E as n,a as o,b as $,l as h,n as G,G as H,t as b,e as m,B as Z,H as de,I as ce,J as pe,F as ne,r as se,K as c,o as y,L as ae,_ as ie,h as j}from"./index-Cl5nGqgc.js";import{E as ve}from"./EncryptionIndicator-DOmuLn2f.js";import{C as fe,D as me}from"./CryptoConflictWarning-C8ICMdaN.js";import"./cryptoConflictManager-Dn8jFaYI.js";const ye={class:"key-management"},ge={class:"card-header"},_e={class:"backup-status"},be={class:"status-item"},we={key:0,class:"backup-info"},ke={class:"key-operations"},Ce={class:"operation-buttons"},Ve={class:"cross-device-sync"},xe={class:"sync-status"},Se={key:0,class:"synced-devices"},Ee={class:"security-settings"},Re={key:0,class:"selected-file"},$e=te({__name:"KeyManagement",setup(re){const E=le(),D=u(!1),O=u(!1),P=u(!1),I=u(!1),U=u(!1),R=u(!1),g=u(!1),f=u({enabled:!1,version:"",algorithm:"",lastBackup:null}),_=u({synced:!1,devices:[]}),C=u({autoBackup:!1,passwordProtection:!0,expirationReminder:!0}),x=u(null),K=u(!1),B=u(""),A=u("phrase"),F=u(""),M=u(""),T=async()=>{D.value=!0;try{const s=E.matrixClient;if(!s)throw new Error("Matrixå®¢æˆ·ç«¯æœªåˆå§‹åŒ–");const e=s.getCrypto();if(!e)throw new Error("åŠ å¯†åŠŸèƒ½ä¸å¯ç”¨");try{const d=await e.checkKeyBackup();d&&(f.value={enabled:!0,version:d.version,algorithm:d.algorithm,lastBackup:new Date})}catch{console.log("æ²¡æœ‰æ‰¾åˆ°å¯†é’¥å¤‡ä»½")}c.success("å¯†é’¥ä¿¡æ¯å·²åˆ·æ–°")}catch(s){console.error("åˆ·æ–°å¯†é’¥ä¿¡æ¯å¤±è´¥:",s),c.error(`åˆ·æ–°å¤±è´¥: ${s.message}`)}finally{D.value=!1}},N=async()=>{try{const s=E.matrixClient;if(!s)throw new Error("Matrixå®¢æˆ·ç«¯æœªåˆå§‹åŒ–");if(!s.getCrypto())throw new Error("åŠ å¯†åŠŸèƒ½ä¸å¯ç”¨");await ae.confirm("è®¾ç½®å¯†é’¥å¤‡ä»½å°†ç”Ÿæˆä¸€ä¸ªæ¢å¤å¯†é’¥ï¼Œè¯·å¦¥å–„ä¿å­˜ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ","è®¾ç½®å¯†é’¥å¤‡ä»½",{confirmButtonText:"ç»§ç»­",cancelButtonText:"å–æ¶ˆ",type:"warning"}),c.success("å¯†é’¥å¤‡ä»½è®¾ç½®æˆåŠŸ"),await T()}catch(s){s!=="cancel"&&(console.error("è®¾ç½®å¯†é’¥å¤‡ä»½å¤±è´¥:",s),c.error(`è®¾ç½®å¤±è´¥: ${s.message}`))}},J=async()=>{O.value=!0;try{const s=E.matrixClient;if(!s)throw new Error("Matrixå®¢æˆ·ç«¯æœªåˆå§‹åŒ–");const e=s.getCrypto();if(!e)throw new Error("åŠ å¯†åŠŸèƒ½ä¸å¯ç”¨");const d=await e.exportRoomKeysAsJson(),w=new Blob([d],{type:"application/json"}),V=URL.createObjectURL(w),p=document.createElement("a");p.href=V,p.download=`jianluochat-keys-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(V),c.success("å¯†é’¥å¯¼å‡ºæˆåŠŸ")}catch(s){console.error("å¯¼å‡ºå¯†é’¥å¤±è´¥:",s),c.error(`å¯¼å‡ºå¤±è´¥: ${s.message}`)}finally{O.value=!1}},Q=s=>{x.value=s.raw,K.value=!0},z=async()=>{if(x.value){P.value=!0;try{const s=E.matrixClient;if(!s)throw new Error("Matrixå®¢æˆ·ç«¯æœªåˆå§‹åŒ–");const e=s.getCrypto();if(!e)throw new Error("åŠ å¯†åŠŸèƒ½ä¸å¯ç”¨");const d=await x.value.text(),w=JSON.parse(d);await e.importRoomKeys(w),c.success("å¯†é’¥å¯¼å…¥æˆåŠŸ"),R.value=!1,x.value=null,B.value=""}catch(s){console.error("å¯¼å…¥å¯†é’¥å¤±è´¥:",s),c.error(`å¯¼å…¥å¤±è´¥: ${s.message}`)}finally{P.value=!1}}},X=async()=>{I.value=!0;try{c.success("å¯†é’¥åŒæ­¥æˆåŠŸ"),await T()}catch(s){console.error("åŒæ­¥å¯†é’¥å¤±è´¥:",s),c.error(`åŒæ­¥å¤±è´¥: ${s.message}`)}finally{I.value=!1}},Y=async()=>{U.value=!0;try{if(!E.matrixClient)throw new Error("Matrixå®¢æˆ·ç«¯æœªåˆå§‹åŒ–");if(A.value==="phrase"){if(!F.value.trim())throw new Error("è¯·è¾“å…¥æ¢å¤çŸ­è¯­")}else if(!M.value.trim())throw new Error("è¯·è¾“å…¥æ¢å¤å¯†é’¥");c.success("å¯†é’¥æ¢å¤æˆåŠŸ"),g.value=!1,F.value="",M.value="",await T()}catch(s){console.error("æ¢å¤å¯†é’¥å¤±è´¥:",s),c.error(`æ¢å¤å¤±è´¥: ${s.message}`)}finally{U.value=!1}},a=()=>{localStorage.setItem("jianluochat-security-settings",JSON.stringify(C.value)),c.success("å®‰å…¨è®¾ç½®å·²æ›´æ–°")},l=s=>s?s.toLocaleString():"ä»æœª";return oe(()=>{const s=localStorage.getItem("jianluochat-security-settings");s&&(C.value={...C.value,...JSON.parse(s)}),T()}),(s,e)=>{const d=v("el-button"),w=v("el-icon"),V=v("el-switch"),p=v("el-form-item"),k=v("el-form"),L=v("el-card"),W=v("el-upload"),i=v("el-input"),q=v("el-dialog"),ee=v("el-tab-pane"),ue=v("el-tabs");return y(),S("div",ye,[t(L,{class:"management-card"},{header:n(()=>[o("div",ge,[e[14]||(e[14]=o("span",null,"ğŸ” å¯†é’¥ç®¡ç†",-1)),t(d,{type:"primary",size:"small",onClick:T,loading:D.value},{default:n(()=>e[13]||(e[13]=[m(" åˆ·æ–° ")])),_:1,__:[13]},8,["loading"])])]),default:n(()=>[o("div",_e,[e[19]||(e[19]=o("h4",null,"å¯†é’¥å¤‡ä»½çŠ¶æ€",-1)),o("div",be,[t(w,{class:G(f.value.enabled?"status-success":"status-warning")},{default:n(()=>[(y(),h(H(f.value.enabled?"SuccessFilled":"WarningFilled")))]),_:1},8,["class"]),o("span",null,b(f.value.enabled?"å·²å¯ç”¨å¯†é’¥å¤‡ä»½":"æœªå¯ç”¨å¯†é’¥å¤‡ä»½"),1),f.value.enabled?$("",!0):(y(),h(d,{key:0,onClick:N,type:"primary",size:"small"},{default:n(()=>e[15]||(e[15]=[m(" è®¾ç½®å¤‡ä»½ ")])),_:1,__:[15]}))]),f.value.enabled?(y(),S("div",we,[o("p",null,[e[16]||(e[16]=o("strong",null,"å¤‡ä»½ç‰ˆæœ¬:",-1)),m(" "+b(f.value.version),1)]),o("p",null,[e[17]||(e[17]=o("strong",null,"ç®—æ³•:",-1)),m(" "+b(f.value.algorithm),1)]),o("p",null,[e[18]||(e[18]=o("strong",null,"æœ€åå¤‡ä»½:",-1)),m(" "+b(l(f.value.lastBackup)),1)])])):$("",!0)]),o("div",ke,[e[23]||(e[23]=o("h4",null,"å¯†é’¥æ“ä½œ",-1)),o("div",Ce,[t(d,{onClick:J,loading:O.value,type:"success"},{default:n(()=>[t(w,null,{default:n(()=>[t(Z(de))]),_:1}),e[20]||(e[20]=m(" å¯¼å‡ºå¯†é’¥ "))]),_:1,__:[20]},8,["loading"]),t(d,{onClick:e[0]||(e[0]=r=>R.value=!0),type:"warning"},{default:n(()=>[t(w,null,{default:n(()=>[t(Z(ce))]),_:1}),e[21]||(e[21]=m(" å¯¼å…¥å¯†é’¥ "))]),_:1,__:[21]}),t(d,{onClick:e[1]||(e[1]=r=>g.value=!0),type:"info"},{default:n(()=>[t(w,null,{default:n(()=>[t(Z(pe))]),_:1}),e[22]||(e[22]=m(" æ¢å¤å¯†é’¥ "))]),_:1,__:[22]})])]),o("div",Ve,[e[26]||(e[26]=o("h4",null,"è·¨è®¾å¤‡åŒæ­¥",-1)),o("div",xe,[t(w,{class:G(_.value.synced?"status-success":"status-warning")},{default:n(()=>[(y(),h(H(_.value.synced?"SuccessFilled":"WarningFilled")))]),_:1},8,["class"]),o("span",null,b(_.value.synced?"å¯†é’¥å·²åŒæ­¥":"å¯†é’¥æœªåŒæ­¥"),1),_.value.synced?$("",!0):(y(),h(d,{key:0,onClick:X,type:"primary",size:"small",loading:I.value},{default:n(()=>e[24]||(e[24]=[m(" åŒæ­¥å¯†é’¥ ")])),_:1,__:[24]},8,["loading"]))]),_.value.devices.length>0?(y(),S("div",Se,[e[25]||(e[25]=o("p",null,[o("strong",null,"å·²åŒæ­¥è®¾å¤‡:")],-1)),o("ul",null,[(y(!0),S(ne,null,se(_.value.devices,r=>(y(),S("li",{key:r.id},b(r.name)+" ("+b(r.id)+") ",1))),128))])])):$("",!0)]),o("div",Ee,[e[27]||(e[27]=o("h4",null,"å®‰å…¨è®¾ç½®",-1)),t(k,{"label-width":"120px"},{default:n(()=>[t(p,{label:"è‡ªåŠ¨å¤‡ä»½"},{default:n(()=>[t(V,{modelValue:C.value.autoBackup,"onUpdate:modelValue":e[2]||(e[2]=r=>C.value.autoBackup=r),onChange:a},null,8,["modelValue"])]),_:1}),t(p,{label:"å¤‡ä»½å¯†ç ä¿æŠ¤"},{default:n(()=>[t(V,{modelValue:C.value.passwordProtection,"onUpdate:modelValue":e[3]||(e[3]=r=>C.value.passwordProtection=r),onChange:a},null,8,["modelValue"])]),_:1}),t(p,{label:"å¯†é’¥è¿‡æœŸæé†’"},{default:n(()=>[t(V,{modelValue:C.value.expirationReminder,"onUpdate:modelValue":e[4]||(e[4]=r=>C.value.expirationReminder=r),onChange:a},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),t(q,{modelValue:R.value,"onUpdate:modelValue":e[7]||(e[7]=r=>R.value=r),title:"å¯¼å…¥å¯†é’¥",width:"500px"},{footer:n(()=>[t(d,{onClick:e[6]||(e[6]=r=>R.value=!1)},{default:n(()=>e[29]||(e[29]=[m("å–æ¶ˆ")])),_:1,__:[29]}),t(d,{type:"primary",onClick:z,loading:P.value,disabled:!x.value},{default:n(()=>e[30]||(e[30]=[m(" å¯¼å…¥ ")])),_:1,__:[30]},8,["loading","disabled"])]),default:n(()=>[t(k,null,{default:n(()=>[t(p,{label:"å¯†é’¥æ–‡ä»¶"},{default:n(()=>[t(W,{ref:"uploadRef","auto-upload":!1,"show-file-list":!1,accept:".json,.txt",onChange:Q},{default:n(()=>[t(d,{type:"primary"},{default:n(()=>e[28]||(e[28]=[m("é€‰æ‹©æ–‡ä»¶")])),_:1,__:[28]})]),_:1},512),x.value?(y(),S("div",Re," å·²é€‰æ‹©: "+b(x.value.name),1)):$("",!0)]),_:1}),K.value?(y(),h(p,{key:0,label:"å¯†ç "},{default:n(()=>[t(i,{modelValue:B.value,"onUpdate:modelValue":e[5]||(e[5]=r=>B.value=r),type:"password",placeholder:"è¯·è¾“å…¥å¯†é’¥æ–‡ä»¶å¯†ç ","show-password":""},null,8,["modelValue"])]),_:1})):$("",!0)]),_:1})]),_:1},8,["modelValue"]),t(q,{modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=r=>g.value=r),title:"æ¢å¤å¯†é’¥",width:"500px"},{footer:n(()=>[t(d,{onClick:e[11]||(e[11]=r=>g.value=!1)},{default:n(()=>e[31]||(e[31]=[m("å–æ¶ˆ")])),_:1,__:[31]}),t(d,{type:"primary",onClick:Y,loading:U.value},{default:n(()=>e[32]||(e[32]=[m(" æ¢å¤ ")])),_:1,__:[32]},8,["loading"])]),default:n(()=>[t(ue,{modelValue:A.value,"onUpdate:modelValue":e[10]||(e[10]=r=>A.value=r)},{default:n(()=>[t(ee,{label:"æ¢å¤çŸ­è¯­",name:"phrase"},{default:n(()=>[t(k,null,{default:n(()=>[t(p,{label:"æ¢å¤çŸ­è¯­"},{default:n(()=>[t(i,{modelValue:F.value,"onUpdate:modelValue":e[8]||(e[8]=r=>F.value=r),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥12ä¸ªå•è¯çš„æ¢å¤çŸ­è¯­ï¼Œç”¨ç©ºæ ¼åˆ†éš”"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(ee,{label:"æ¢å¤å¯†é’¥",name:"key"},{default:n(()=>[t(k,null,{default:n(()=>[t(p,{label:"æ¢å¤å¯†é’¥"},{default:n(()=>[t(i,{modelValue:M.value,"onUpdate:modelValue":e[9]||(e[9]=r=>M.value=r),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥æ¢å¤å¯†é’¥"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),he=ie($e,[["__scopeId","data-v-52d42e5a"]]),Be={class:"encryption-settings"},De={class:"card-header"},Ie={class:"status-content"},Ue={class:"status-item"},Me={class:"status-info"},Te={key:0,class:"crypto-info"},je={class:"info-grid"},Ke={class:"info-item"},Fe={class:"info-value"},Ne={class:"info-item"},Oe={class:"info-value"},Pe={class:"info-item"},Ae={class:"info-value"},Je={class:"info-item"},ze={class:"card-header"},Le={class:"room-encryption-settings"},We={class:"security-recommendations"},qe={class:"recommendation-content"},Ge={class:"advanced-settings"},He={class:"danger-zone"},Qe=te({__name:"EncryptionSettings",setup(re){const E=le(),D=u(),O=u(),P=u(),I=u(!1),U=u(!1),R=u(!1),g=u({defaultEncryption:!1,encryptionAlgorithm:"m.megolm.v1.aes-sha2",keyRotationPeriod:6048e5,historyVisibility:"invited"}),f=u({debugMode:!1,strictVerification:!1,autoAcceptVerification:!1}),_=j(()=>!!E.matrixClient?.getCrypto()),C=j(()=>"Rust Crypto SDK"),x=j(()=>E.matrixClient?.getDeviceId()||"æœªçŸ¥"),K=j(()=>0),B=j(()=>!1),A=j(()=>_.value?"æ‚¨çš„æ¶ˆæ¯å·²é€šè¿‡ç«¯åˆ°ç«¯åŠ å¯†ä¿æŠ¤ï¼Œåªæœ‰æ‚¨å’Œå¯¹è¯æ–¹èƒ½å¤Ÿé˜…è¯»ã€‚":"å¯ç”¨ç«¯åˆ°ç«¯åŠ å¯†ä»¥ä¿æŠ¤æ‚¨çš„æ¶ˆæ¯éšç§å’Œå®‰å…¨ã€‚"),F=j(()=>{const a=[];return _.value||a.push({type:"error",icon:"CircleCloseFilled",title:"å¯ç”¨ç«¯åˆ°ç«¯åŠ å¯†",description:"ä¿æŠ¤æ‚¨çš„æ¶ˆæ¯å…å—çªƒå¬å’Œç¯¡æ”¹",action:M,actionText:"ç«‹å³å¯ç”¨",actionType:"primary"}),!B.value&&_.value&&a.push({type:"warning",icon:"WarningFilled",title:"è®¾ç½®å¯†é’¥å¤‡ä»½",description:"é˜²æ­¢è®¾å¤‡ä¸¢å¤±æ—¶æ— æ³•è®¿é—®åŠ å¯†æ¶ˆæ¯",action:()=>z("key-management"),actionText:"è®¾ç½®å¤‡ä»½",actionType:"warning"}),K.value===0&&_.value&&a.push({type:"info",icon:"InfoFilled",title:"éªŒè¯æ‚¨çš„è®¾å¤‡",description:"éªŒè¯è®¾å¤‡ä»¥ç¡®ä¿é€šä¿¡å®‰å…¨",action:()=>z("device-verification"),actionText:"éªŒè¯è®¾å¤‡",actionType:"primary"}),a.length===0&&a.push({type:"success",icon:"Shield",title:"å®‰å…¨è®¾ç½®å®Œå–„",description:"æ‚¨çš„åŠ å¯†è®¾ç½®å·²æ­£ç¡®é…ç½®ï¼Œé€šä¿¡å®‰å…¨å¾—åˆ°ä¿éšœ",action:null,actionText:"",actionType:"success"}),a}),M=async()=>{I.value=!0;try{const a=E.matrixClient;if(!a)throw new Error("Matrixå®¢æˆ·ç«¯æœªåˆå§‹åŒ–");if(typeof a.initRustCrypto=="function")await a.initRustCrypto({useIndexedDB:!0,cryptoDatabasePrefix:"jianluochat-crypto"}),c.success("ç«¯åˆ°ç«¯åŠ å¯†å·²å¯ç”¨");else throw new Error("å®¢æˆ·ç«¯ä¸æ”¯æŒåŠ å¯†åŠŸèƒ½")}catch(a){console.error("å¯ç”¨åŠ å¯†å¤±è´¥:",a),c.error(`å¯ç”¨åŠ å¯†å¤±è´¥: ${a.message}`)}finally{I.value=!1}},T=async()=>{U.value=!0;try{D.value&&await D.value.loadUserDevices(),c.success("è®¾å¤‡åˆ—è¡¨å·²åˆ·æ–°")}catch(a){console.error("åˆ·æ–°è®¾å¤‡å¤±è´¥:",a),c.error(`åˆ·æ–°å¤±è´¥: ${a.message}`)}finally{U.value=!1}},N=()=>{localStorage.setItem("jianluochat-room-settings",JSON.stringify(g.value)),c.success("æˆ¿é—´è®¾ç½®å·²æ›´æ–°")},J=()=>{localStorage.setItem("jianluochat-advanced-settings",JSON.stringify(f.value)),c.success("é«˜çº§è®¾ç½®å·²æ›´æ–°")},Q=async()=>{try{await ae.confirm("è¿™å°†æ¸…é™¤æ‰€æœ‰åŠ å¯†æ•°æ®ï¼ŒåŒ…æ‹¬å¯†é’¥å’Œè®¾å¤‡éªŒè¯çŠ¶æ€ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼","é‡ç½®åŠ å¯†è®¾ç½®",{confirmButtonText:"ç¡®è®¤é‡ç½®",cancelButtonText:"å–æ¶ˆ",type:"error"}),R.value=!0,c.success("åŠ å¯†è®¾ç½®å·²é‡ç½®")}catch(a){a!=="cancel"&&(console.error("é‡ç½®åŠ å¯†è®¾ç½®å¤±è´¥:",a),c.error("é‡ç½®å¤±è´¥"))}finally{R.value=!1}},z=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth"})},X=a=>{console.warn("æ£€æµ‹åˆ°åŠ å¯†å†²çª:",a)},Y=()=>{console.log("åŠ å¯†å†²çªå·²è§£å†³"),c.success("åŠ å¯†å†²çªå·²è§£å†³ï¼Œå»ºè®®åˆ·æ–°é¡µé¢")};return oe(()=>{const a=localStorage.getItem("jianluochat-room-settings");a&&(g.value={...g.value,...JSON.parse(a)});const l=localStorage.getItem("jianluochat-advanced-settings");l&&(f.value={...f.value,...JSON.parse(l)})}),(a,l)=>{const s=v("el-icon"),e=v("el-button"),d=v("el-tag"),w=v("el-card"),V=v("el-switch"),p=v("el-form-item"),k=v("el-option"),L=v("el-select"),W=v("el-form");return y(),S("div",Be,[l[30]||(l[30]=o("div",{class:"settings-header"},[o("h1",null,"ğŸ” ç«¯åˆ°ç«¯åŠ å¯†è®¾ç½®"),o("p",{class:"header-description"}," ç®¡ç†æ‚¨çš„ç«¯åˆ°ç«¯åŠ å¯†è®¾ç½®ï¼Œç¡®ä¿èŠå¤©å®‰å…¨å’Œéšç§ä¿æŠ¤ ")],-1)),t(fe,{ref_key:"conflictWarningRef",ref:P,onConflictDetected:X,onConflictResolved:Y},null,512),t(w,{class:"status-card"},{header:n(()=>[o("div",De,[l[8]||(l[8]=o("span",null,"åŠ å¯†çŠ¶æ€",-1)),t(ve,{type:"global",encrypted:_.value,"crypto-engine":C.value,"device-id":x.value,"global-verified-devices":K.value,"key-backup-enabled":B.value,onManageEncryption:l[0]||(l[0]=i=>z("key-management"))},null,8,["encrypted","crypto-engine","device-id","global-verified-devices","key-backup-enabled"])])]),default:n(()=>[o("div",Ie,[o("div",Ue,[t(s,{class:G(["status-icon",_.value?"success":"error"])},{default:n(()=>[(y(),h(H(_.value?"SuccessFilled":"CircleCloseFilled")))]),_:1},8,["class"]),o("div",Me,[o("h3",null,b(_.value?"ç«¯åˆ°ç«¯åŠ å¯†å·²å¯ç”¨":"ç«¯åˆ°ç«¯åŠ å¯†æœªå¯ç”¨"),1),o("p",null,b(A.value),1)]),_.value?$("",!0):(y(),h(e,{key:0,type:"primary",onClick:M,loading:I.value},{default:n(()=>l[9]||(l[9]=[m(" å¯ç”¨åŠ å¯† ")])),_:1,__:[9]},8,["loading"]))]),_.value?(y(),S("div",Te,[o("div",je,[o("div",Ke,[l[10]||(l[10]=o("span",{class:"info-label"},"åŠ å¯†å¼•æ“:",-1)),o("span",Fe,b(C.value),1)]),o("div",Ne,[l[11]||(l[11]=o("span",{class:"info-label"},"è®¾å¤‡ID:",-1)),o("span",Oe,b(x.value),1)]),o("div",Pe,[l[12]||(l[12]=o("span",{class:"info-label"},"å·²éªŒè¯è®¾å¤‡:",-1)),o("span",Ae,b(K.value),1)]),o("div",Je,[l[13]||(l[13]=o("span",{class:"info-label"},"å¯†é’¥å¤‡ä»½:",-1)),t(d,{type:B.value?"success":"warning",size:"small"},{default:n(()=>[m(b(B.value?"å·²å¯ç”¨":"æœªå¯ç”¨"),1)]),_:1},8,["type"])])])])):$("",!0)])]),_:1}),t(w,{class:"section-card",id:"device-verification"},{header:n(()=>[o("div",ze,[l[15]||(l[15]=o("span",null,"è®¾å¤‡éªŒè¯",-1)),t(e,{type:"primary",size:"small",onClick:T,loading:U.value},{default:n(()=>l[14]||(l[14]=[m(" åˆ·æ–°è®¾å¤‡ ")])),_:1,__:[14]},8,["loading"])])]),default:n(()=>[t(me,{ref_key:"deviceVerificationRef",ref:D,"show-device-list":!0},null,512)]),_:1}),t(w,{class:"section-card",id:"key-management"},{header:n(()=>l[16]||(l[16]=[o("span",null,"å¯†é’¥ç®¡ç†",-1)])),default:n(()=>[t(he,{ref_key:"keyManagementRef",ref:O},null,512)]),_:1}),t(w,{class:"section-card"},{header:n(()=>l[17]||(l[17]=[o("span",null,"æˆ¿é—´åŠ å¯†è®¾ç½®",-1)])),default:n(()=>[o("div",Le,[t(W,{"label-width":"150px"},{default:n(()=>[t(p,{label:"é»˜è®¤å¯ç”¨åŠ å¯†"},{default:n(()=>[t(V,{modelValue:g.value.defaultEncryption,"onUpdate:modelValue":l[1]||(l[1]=i=>g.value.defaultEncryption=i),onChange:N},null,8,["modelValue"]),l[18]||(l[18]=o("div",{class:"setting-description"}," æ–°åˆ›å»ºçš„æˆ¿é—´å°†é»˜è®¤å¯ç”¨ç«¯åˆ°ç«¯åŠ å¯† ",-1))]),_:1,__:[18]}),t(p,{label:"åŠ å¯†ç®—æ³•"},{default:n(()=>[t(L,{modelValue:g.value.encryptionAlgorithm,"onUpdate:modelValue":l[2]||(l[2]=i=>g.value.encryptionAlgorithm=i),onChange:N},{default:n(()=>[t(k,{label:"Megolm (æ¨è)",value:"m.megolm.v1.aes-sha2"})]),_:1},8,["modelValue"]),l[19]||(l[19]=o("div",{class:"setting-description"}," ç”¨äºæˆ¿é—´æ¶ˆæ¯åŠ å¯†çš„ç®—æ³• ",-1))]),_:1,__:[19]}),t(p,{label:"å¯†é’¥è½®æ¢å‘¨æœŸ"},{default:n(()=>[t(L,{modelValue:g.value.keyRotationPeriod,"onUpdate:modelValue":l[3]||(l[3]=i=>g.value.keyRotationPeriod=i),onChange:N},{default:n(()=>[t(k,{label:"1å¤©",value:864e5}),t(k,{label:"7å¤©",value:6048e5}),t(k,{label:"30å¤©",value:2592e6}),t(k,{label:"ä»ä¸",value:0})]),_:1},8,["modelValue"]),l[20]||(l[20]=o("div",{class:"setting-description"}," å®šæœŸè½®æ¢æˆ¿é—´åŠ å¯†å¯†é’¥ä»¥æé«˜å®‰å…¨æ€§ ",-1))]),_:1,__:[20]}),t(p,{label:"å†å²æ¶ˆæ¯å¯è§æ€§"},{default:n(()=>[t(L,{modelValue:g.value.historyVisibility,"onUpdate:modelValue":l[4]||(l[4]=i=>g.value.historyVisibility=i),onChange:N},{default:n(()=>[t(k,{label:"ä»…é‚€è¯·åå¯è§",value:"invited"}),t(k,{label:"ä»…åŠ å…¥åå¯è§",value:"joined"}),t(k,{label:"å®Œå…¨å¯è§",value:"shared"})]),_:1},8,["modelValue"]),l[21]||(l[21]=o("div",{class:"setting-description"}," æ§åˆ¶æ–°æˆå‘˜èƒ½çœ‹åˆ°å¤šå°‘å†å²æ¶ˆæ¯ ",-1))]),_:1,__:[21]})]),_:1})])]),_:1}),t(w,{class:"section-card"},{header:n(()=>l[22]||(l[22]=[o("span",null,"å®‰å…¨å»ºè®®",-1)])),default:n(()=>[o("div",We,[(y(!0),S(ne,null,se(F.value,(i,q)=>(y(),S("div",{key:q,class:G(["recommendation-item",i.type])},[t(s,{class:"recommendation-icon"},{default:n(()=>[(y(),h(H(i.icon)))]),_:2},1024),o("div",qe,[o("h4",null,b(i.title),1),o("p",null,b(i.description),1),i.action?(y(),h(e,{key:0,size:"small",type:i.actionType,onClick:i.action},{default:n(()=>[m(b(i.actionText),1)]),_:2},1032,["type","onClick"])):$("",!0)])],2))),128))])]),_:1}),t(w,{class:"section-card"},{header:n(()=>l[23]||(l[23]=[o("span",null,"é«˜çº§è®¾ç½®",-1)])),default:n(()=>[o("div",Ge,[t(W,{"label-width":"150px"},{default:n(()=>[t(p,{label:"è°ƒè¯•æ¨¡å¼"},{default:n(()=>[t(V,{modelValue:f.value.debugMode,"onUpdate:modelValue":l[5]||(l[5]=i=>f.value.debugMode=i),onChange:J},null,8,["modelValue"]),l[24]||(l[24]=o("div",{class:"setting-description"}," å¯ç”¨åŠ å¯†è°ƒè¯•æ—¥å¿—ï¼ˆä»…ç”¨äºæ•…éšœæ’é™¤ï¼‰ ",-1))]),_:1,__:[24]}),t(p,{label:"ä¸¥æ ¼éªŒè¯"},{default:n(()=>[t(V,{modelValue:f.value.strictVerification,"onUpdate:modelValue":l[6]||(l[6]=i=>f.value.strictVerification=i),onChange:J},null,8,["modelValue"]),l[25]||(l[25]=o("div",{class:"setting-description"}," åªå…è®¸ä¸å·²éªŒè¯è®¾å¤‡è¿›è¡ŒåŠ å¯†é€šä¿¡ ",-1))]),_:1,__:[25]}),t(p,{label:"è‡ªåŠ¨æ¥å—éªŒè¯"},{default:n(()=>[t(V,{modelValue:f.value.autoAcceptVerification,"onUpdate:modelValue":l[7]||(l[7]=i=>f.value.autoAcceptVerification=i),onChange:J},null,8,["modelValue"]),l[26]||(l[26]=o("div",{class:"setting-description"}," è‡ªåŠ¨æ¥å—æ¥è‡ªå·²çŸ¥è®¾å¤‡çš„éªŒè¯è¯·æ±‚ ",-1))]),_:1,__:[26]})]),_:1}),o("div",He,[l[28]||(l[28]=o("h4",null,"å±é™©æ“ä½œ",-1)),t(e,{type:"danger",onClick:Q,loading:R.value},{default:n(()=>l[27]||(l[27]=[m(" é‡ç½®åŠ å¯†è®¾ç½® ")])),_:1,__:[27]},8,["loading"]),l[29]||(l[29]=o("div",{class:"setting-description"}," è¿™å°†æ¸…é™¤æ‰€æœ‰åŠ å¯†æ•°æ®ï¼ŒåŒ…æ‹¬å¯†é’¥å’Œè®¾å¤‡éªŒè¯çŠ¶æ€ ",-1))])])]),_:1})])}}}),tt=ie(Qe,[["__scopeId","data-v-8755c983"]]);export{tt as default};
